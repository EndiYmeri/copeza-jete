---
import CategoryLayout from "../layouts/CategoryLayout.astro";
import type { MasonryImages, WordPressImageDetails } from "../types/image"; // Ensure WordPressImageDetails is imported
import { getMediaDetails } from "../utils/helpers"; // Assuming getMediaDetails extracts source_url
import { getImageByID } from "../utils/wordpressAPI"; // Assuming getImageByID fetches image data


export async function getStaticPaths() {
  const pages = [
  { slug: "pregnancy", title: "Pregnancy" },
  { slug: "babies", title: "Babies" },
  { slug: "family", title: "Family" },
  { slug: "events", title: "Events" },
  { slug: "portraits", title: "Portraits" },
  { slug: "nature", title: "Nature" },
];

  return pages.map((page) => {
    return {
      params: { pageSlug: page.slug },
      props: { page },
    };
  });
}

const { pageSlug } = Astro.params;
const page = Astro.props.page;

const foundPage = page;

let masonryImages: MasonryImages = {
  col1: [],
  col2: [],
  col3: [],
  col4: [],
};

// Array to collect all image URLs for preloading
let allImageUrls: string[] = [];

// Filter out any potential undefined or null URLs and ensure uniqueness
const uniqueImageUrls = [
  ...new Set(allImageUrls.filter((url) => url && typeof url === "string")),
];

console.log({ uniqueImageUrls });
---

{
  foundPage && (
    <CategoryLayout
      masonryImages={masonryImages}
      title={foundPage?.title}
      imageUrls={uniqueImageUrls}
    />
  )
}
